{% from "palletList.twig" import listPallets as listPallets %}

{% block content %}

{% if view == "CHOOSE_SEARCH" %}
  <form action="searchPallets.php" method="GET">
    <p>Search pallets by Recipe:</p>

    <select name="recipeID">
      <option value=""></option>

      {% for recipe in recipes %}
      <option value="{{ recipe.id }}">{{ recipe.name }}</option>
      {% endfor %}
    </select>

    <input type="hidden" name="searchType" value="ByRecipe" />
    <input type="submit" value="Search by Recipe" />
  </form>

  <form action="searchPallets.php" method="GET">
    <p>Search pallets by Date Range:</p>

    <input type="date" name="start" value="" />
    <input type="date" name="end" value="" />

    <input type="hidden" name="searchType" value="ByDateRange" />
    <input type="submit" value="Search by Date Range" />
  </form>

  <form action="searchPallets.php" method="GET">
    <p>Search delivered pallets by Customer:</p>

    <select name="customerID">
      <option value=""></option>

      {% for customer in customers %}
      <option value="{{ customer.id }}">{{ customer.name }} - {{ customer.address }}</option>
      {% endfor %}
    </select>

    <input type="hidden" name="searchType" value="ByCustomer" />
    <input type="submit" value="Search by Customer" />
  </form>

{% elseif view == "RECIPE_SEARCH" %}
  <p>Searching for all pallets by recipe {{ searchResults.recipe.name }}</p>

{% elseif view == "DATERANGE_SEARCH" %}
  <p>Searching for all pallets by date range ({{ searchResults.start }} - {{ searchResults.end }}).</p>

{% elseif view == "CUSTOMER_SEARCH" %}
  <p>Searching for delivered pallets by customer {{ customer.name }}.</p>

{% endif %}

{% if view != "CHOOSE_SEARCH" %}
  <p><a href="searchPallets.php">Go back to search.</a></p>

  {{ listPallets(searchResults.pallets) }}

{% endif %}

{% endblock %}